<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class MagicFeed | PHP MagicFeed</title>

	<script type="text/javascript" src="resources/combined.js?897137478"></script>
	<script type="text/javascript" src="elementlist.js?3153192269"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/bootstrap.min.css?1629049900" />
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?2015443609" />

</head>

<body>
	<div id="navigation" class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a href="index.html" class="brand">PHP MagicFeed</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li class="active">
<span>Class</span>						</li>

						<li class="divider-vertical"></li>

						<li>
							<a href="todo.html" title="Todo list"><span>Todo</span></a>
						</li>

						<li class="divider-vertical"></li>

						<li>
							<a href="php-magicfeed-api-documentation.zip" title="Download documentation as ZIP archive"><span>Download</span></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div id="left">
	<div id="menu">
		<form id="search" class="form-search">
			<input type="hidden" name="cx" value="" />
			<input type="hidden" name="ie" value="UTF-8" />
			<input type="text" name="q" class="search-query" placeholder="Search" />
		</form>


		<div id="groups">
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-MagicFeed.html">MagicFeed</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class MagicFeed</h1>


	<div class="description">
	
<p>Parse RSS and ATOM feeds. Standarize the same names for both systems.</p>

<ul>
	<li>See <code><a href="class-MagicFeed.html#$itemDefault">MagicFeed::<var>$itemDefault</var></a></code> for a list of tags returned in each item.</li>

	<li>See <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code> for a list of options available before use <code><a href="class-MagicFeed.html#_parse">MagicFeed::parse()</a></code></li>
</ul>

<div><br />
</div>

<p>Example:</p>

<pre>
<span class="php-comment">// basic example</span>
<span
class="php-var">$items</span> = MagicFeed::parse(<span
class="php-quote">'http://www.reddit.com/.rss'</span>);
<span
class="php-keyword1">if</span> (MagicFeed::<span
class="php-keyword2">count</span>()) {
    <span
class="php-keyword1">foreach</span> (<span class="php-var">$items</span> <span
class="php-keyword1">as</span> <span
class="php-var">$item</span>) {
        <span
class="php-keyword1">echo</span> <span class="php-var">$item</span>[<span
class="php-quote">'title'</span>].&lt;br /&gt;
    }
} <span
class="php-keyword1">else</span> {
    <span
class="php-keyword1">if</span> (MagicFeed::getError()) {
        <span
class="php-keyword1">die</span>(MagicFeed::getError());
    } <span
class="php-keyword1">else</span> {
        <span
class="php-keyword1">die</span>(<span
class="php-quote">'There aren\'t items'</span>);
    }
}
<span
class="php-comment">// var_dump($items);</span>
</pre>

<p>Example with cache using <code><a href="class-MagicFeed.html#_enableCache">MagicFeed::enableCache()</a></code>. Set directory "./cache" and
24 Hours (1440 mins) of expiration time.</p>

<pre>
MagicFeed::enableCache(<span class="php-quote">'./cache'</span>, <span
class="php-num">1440</span>);
<span
class="php-var">$items</span> = MagicFeed::parse(<span
class="php-quote">'http://www.reddit.com/.rss'</span>);
<span
class="php-comment">// var_dump($items);</span>
</pre>

<p>Using config options. See all options and default values in property <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code> (private)</p>

<pre>
MagicFeed::set(<span class="php-quote">'time_format'</span>, <span
class="php-quote">'d-m-Y'</span>); <span
class="php-comment">// default is timestamp</span>
MagicFeed::set(<span
class="php-quote">'summary_length'</span>, <span
class="php-num">250</span>); <span
class="php-comment">// default is 140</span>
<span
class="php-var">$items</span> = MagicFeed::parse(<span
class="php-quote">'http://www.reddit.com/.rss'</span>);
<span
class="php-comment">// var_dump($items);</span>
</pre>

<p><br />
PHP Version 5</p>

	</div>









	<div class="alert alert-info">
		
		
		
		

				<b>License:</b>
				<a href="MIT">License</a><br />
				<b>Author:</b>
				Jordi Engu√≠danos &lt;<a
href="mailto:jordifreek&#64;gmail.com">jordifreek&#64;<!---->gmail.com</a>&gt;<br />
				<b>Version:</b>
				1.0 Beta<br />
		<b>Located at</b> <a href="source-class-MagicFeed.html#2-520" title="Go to source code">feed.class.php</a><br />
	</div>



		<h2>Methods summary</h2>
		<table class="summary table table-bordered table-striped" id="methods">
		<tr data-order="__construct" id="___construct">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#___construct">#</a>
			<code><a href="source-class-MagicFeed.html#104-111" title="Go to source code">__construct</a>( )</code>

			<div class="description short">
				
<p>Nothing to do</p>

			</div>

			<div class="description detailed hidden">
				
<p>Nothing to do</p>








			</div>
			</div></td>
		</tr>
		<tr data-order="parse" id="_parse">

			<td class="attributes"><code>
				 public static
				mixed
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_parse">#</a>
			<code><a href="source-class-MagicFeed.html#113-170" title="Go to source code">parse</a>( <span>mixed <var>$feed</var></span> )</code>

			<div class="description short">
				
<p>Parse URL and detect type of feed.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Parse URL and detect type of feed.</p>

<pre>
<span class="php-var">$items</span> = MagicFeed::parse(<span
class="php-quote">'feed1.xml'</span>));
</pre>

<p>Also pass multiple feeds in an array</p>

<pre>
<span class="php-var">$items</span> = MagicFeed::parse(<span
class="php-keyword1">array</span>(<span
class="php-quote">'feed1.xml'</span>, <span
class="php-quote">'feed2.xml'</span>, <span
class="php-quote">'feed3.xml'</span>));
</pre>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$feed</var></dt>
						<dd><code>mixed</code><br>May be a local or remote URL (string). Multiple URL with an array.</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>mixed</code><br>False on error or an array of items. No items if ampty array<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="count" id="_count">

			<td class="attributes"><code>
				 public static
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_count">#</a>
			<code><a href="source-class-MagicFeed.html#172-179" title="Go to source code">count</a>( )</code>

			<div class="description short">
				
<p>Count items. Use after <code><a href="class-MagicFeed.html#_parse">MagicFeed::parse()</a></code>;</p>

			</div>

			<div class="description detailed hidden">
				
<p>Count items. Use after <code><a href="class-MagicFeed.html#_parse">MagicFeed::parse()</a></code>;</p>




					<h4>Returns</h4>
					<div class="list">
						<code>integer</code><br>Number of items<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="enableCache" id="_enableCache">

			<td class="attributes"><code>
				 public static
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_enableCache">#</a>
			<code><a href="source-class-MagicFeed.html#181-198" title="Go to source code">enableCache</a>( <span>string <var>$directory</var> = <span class="php-quote">''</span></span>, <span>string <var>$expirationTime</var> = <span class="php-num">350</span></span> )</code>

			<div class="description short">
				
<p>Enable cache.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Enable cache.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$directory</var></dt>
						<dd><code>string</code><br>Path to cache directory.</dd>
						<dt><var>$expirationTime</var></dt>
						<dd><code>string</code><br>Cache duration time in minutes</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>boolean</code><br>False if directory doesn't exists or isn't writable<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="get" id="_get">

			<td class="attributes"><code>
				 public static
				Return
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_get">#</a>
			<code><a href="source-class-MagicFeed.html#200-215" title="Go to source code">get</a>( <span>Option <var>$option</var></span> )</code>

			<div class="description short">
				
<p>Get an option of <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code>.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Get an option of <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code>.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$option</var></dt>
						<dd><code>Option</code><br>to return</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>Return</code><br>the option if exists, otherwise return false and create an error.<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="set" id="_set">

			<td class="attributes"><code>
				 public static
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_set">#</a>
			<code><a href="source-class-MagicFeed.html#217-226" title="Go to source code">set</a>( <span>mixed <var>$option</var></span>, <span>mixed <var>$value</var></span> )</code>

			<div class="description short">
				
<p>Set an option. Available options are listed in <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code>.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Set an option. Available options are listed in <code><a href="class-MagicFeed.html#$options">MagicFeed::<var>$options</var></a></code>.</p>




					<h4>Returns</h4>
					<div class="list">
						<code>string</code><br>$option<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="getError" id="_getError">

			<td class="attributes"><code>
				 public static
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_getError">#</a>
			<code><a href="source-class-MagicFeed.html#228-240" title="Go to source code">getError</a>( )</code>

			<div class="description short">
				
<p>Get the last error</p>

			</div>

			<div class="description detailed hidden">
				
<p>Get the last error</p>

<p>return string Last error. False if there aren't errors.</p>








			</div>
			</div></td>
		</tr>
		<tr data-order="parseRss" id="_parseRss">

			<td class="attributes"><code>
				 private static
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_parseRss">#</a>
			<code><a href="source-class-MagicFeed.html#248-336" title="Go to source code">parseRss</a>( )</code>

			<div class="description short">
				
<p>Parse an RSS file. Use the private property <code><a href="class-MagicFeed.html#$dom">MagicFeed::<var>$dom</var></a></code> initialized in
<code><a href="class-MagicFeed.html#_parse">MagicFeed::parse()</a></code></p>

			</div>

			<div class="description detailed hidden">
				
<p>Parse an RSS file. Use the private property <code><a href="class-MagicFeed.html#$dom">MagicFeed::<var>$dom</var></a></code> initialized in
<code><a href="class-MagicFeed.html#_parse">MagicFeed::parse()</a></code></p>




					<h4>Returns</h4>
					<div class="list">
						<code>array</code><br>Array of items, if no items return an empty array<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="parseAtom" id="_parseAtom">

			<td class="attributes"><code>
				 private static
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_parseAtom">#</a>
			<code><a href="source-class-MagicFeed.html#338-398" title="Go to source code">parseAtom</a>( )</code>

			<div class="description short">
				
<p>Parse an ATOM file. Like <code><a href="class-MagicFeed.html#_parseRss">MagicFeed::parseRss()</a></code>.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Parse an ATOM file. Like <code><a href="class-MagicFeed.html#_parseRss">MagicFeed::parseRss()</a></code>.</p>




					<h4>Returns</h4>
					<div class="list">
						<code>array</code><br>Array of items or an empty array if no items<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="extractMedia" id="_extractMedia">

			<td class="attributes"><code>
				 private static
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_extractMedia">#</a>
			<code><a href="source-class-MagicFeed.html#400-442" title="Go to source code">extractMedia</a>( <span>object <var>$node</var></span>, <span>string <var>$urlNodeName</var> = <span class="php-quote">'url'</span></span>, <span>string <var>$mediaType</var> = <span class="php-quote">'imag'</span></span> )</code>

			<div class="description short">
				
<p>Extract images from RSS and ATOM feeds, also extract links from ATOM.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Extract images from RSS and ATOM feeds, also extract links from ATOM.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$node</var></dt>
						<dd><code>object</code><br>An array of DOMElement() objects</dd>
						<dt><var>$urlNodeName</var></dt>
						<dd><code>string</code><br>The attribute where search (like "url" in enclosure tag)</dd>
						<dt><var>$mediaType</var></dt>
						<dd><code>string</code><br>If "imag" or "text", use substr in $urlNodeName to extract the image URL or item
link ($urlNodeName = type). If "text" but attr type doesn't exists then search
for "rel" attr and return his content as the item link.</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>string</code><br>The image or link. An empty string if error.<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="createSummary" id="_createSummary">

			<td class="attributes"><code>
				 private static
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_createSummary">#</a>
			<code><a href="source-class-MagicFeed.html#444-459" title="Go to source code">createSummary</a>( <span>string <var>$content</var></span> )</code>

			<div class="description short">
				
<p>Create a summary for RSS/Atom items. Use strip_tags and truncate.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Create a summary for RSS/Atom items. Use strip_tags and truncate.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$content</var></dt>
						<dd><code>string</code><br>$content Content of content tag</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>string</code><br>Summary as text without tags<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="getCache" id="_getCache">

			<td class="attributes"><code>
				 private static
				mixed
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_getCache">#</a>
			<code><a href="source-class-MagicFeed.html#461-492" title="Go to source code">getCache</a>( <span>string <var>$url</var></span> )</code>

			<div class="description short">
				
<p>Load cache.</p>

			</div>

			<div class="description detailed hidden">
				
<p>Load cache.</p>



					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$url</var></dt>
						<dd><code>string</code><br>$url Cache url</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code>mixed</code><br>false if cache doesn't exists or expiration time is passed. Cache content
otherwise<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="setCache" id="_setCache">

			<td class="attributes"><code>
				 private static
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_setCache">#</a>
			<code><a href="source-class-MagicFeed.html#494-510" title="Go to source code">setCache</a>( )</code>

			<div class="description short">
				
<p>Save cache for actual $items</p>

			</div>

			<div class="description detailed hidden">
				
<p>Save cache for actual $items</p>




					<h4>Returns</h4>
					<div class="list">
						<code>boolean</code><br>False if cache doesn't exists or error. True otherwise.<br />
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="addError" id="_addError">

			<td class="attributes"><code>
				 private static
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_addError">#</a>
			<code><a href="source-class-MagicFeed.html#512-519" title="Go to source code">addError</a>( <span>mixed <var>$str</var></span> )</code>

			<div class="description short">
				
<p>Add a new error</p>

			</div>

			<div class="description detailed hidden">
				
<p>Add a new error</p>








			</div>
			</div></td>
		</tr>
		</table>



		<h3>Magic methods summary</h3>








		<h2>Properties summary</h2>
		<table class="summary table table-bordered table-striped" id="properties">
		<tr data-order="items" id="$items">
			<td class="attributes"><code>
				public static 
				array
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#52-53" title="Go to source code"><var>$items</var></a>
			</td>
			<td class="description"><div>
				<a href="#$items" class="anchor">#</a>

				<div class="description short">
					
<p>Items in a feed</p>

				</div>

				<div class="description detailed hidden">
					
<p>Items in a feed</p>


				</div>
			</div></td>
		</tr>
		<tr data-order="errors" id="$errors">
			<td class="attributes"><code>
				public static 
				array
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#55-56" title="Go to source code"><var>$errors</var></a>
			</td>
			<td class="description"><div>
				<a href="#$errors" class="anchor">#</a>

				<div class="description short">
					
<p>Errors while parsing files</p>

				</div>

				<div class="description detailed hidden">
					
<p>Errors while parsing files</p>


				</div>
			</div></td>
		</tr>
		<tr data-order="dom" id="$dom">
			<td class="attributes"><code>
				private static 
				object
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#58-59" title="Go to source code"><var>$dom</var></a>
			</td>
			<td class="description"><div>
				<a href="#$dom" class="anchor">#</a>

				<div class="description short">
					
<p>DomDocument() object</p>

				</div>

				<div class="description detailed hidden">
					
<p>DomDocument() object</p>


				</div>
			</div></td>
		</tr>
		<tr data-order="invalidTags" id="$invalidTags">
			<td class="attributes"><code>
				private static 
				array
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#61-62" title="Go to source code"><var>$invalidTags</var></a>
			</td>
			<td class="description"><div>
				<a href="#$invalidTags" class="anchor">#</a>

				<div class="description short">
					
<p>Tags to remove</p>

				</div>

				<div class="description detailed hidden">
					
<p>Tags to remove</p>


				</div>
			</div></td>
		</tr>
		<tr data-order="itemDefault" id="$itemDefault">
			<td class="attributes"><code>
				private static 
				array
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#64-85" title="Go to source code"><var>$itemDefault</var></a>
			</td>
			<td class="description"><div>
				<a href="#$itemDefault" class="anchor">#</a>

				<div class="description short">
					
<p>Default values for each item. Yeah, this is a "template" string. Contain
available tags for both RSS and ATOM. List of items:</p>

<ul>
	<li><i>Title</i>: Tag title, without changes</li>

	<li><i>Summary</i>: In RSS is a truncated string of content tag</li>

	<li><i>Content</i>: In RSS it's the description tag</li>

	<li><i>Link</i>: The guid tag in RSS or link tag in Atom</li>

	<li><i>Image</i>: MagicFeed search for images in enclosure and media tags</li>

	<li><i>Category</i>: Tag category, without changes</li>

	<li><i>Author</i>: Tag author, tell me if you get error in Atom files</li>

	<li><i>Date</i>: Item date in timestamp or set date format in time_format
	option</li>
</ul>

				</div>

				<div class="description detailed hidden">
					
<p>Default values for each item. Yeah, this is a "template" string. Contain
available tags for both RSS and ATOM. List of items:</p>

<ul>
	<li><i>Title</i>: Tag title, without changes</li>

	<li><i>Summary</i>: In RSS is a truncated string of content tag</li>

	<li><i>Content</i>: In RSS it's the description tag</li>

	<li><i>Link</i>: The guid tag in RSS or link tag in Atom</li>

	<li><i>Image</i>: MagicFeed search for images in enclosure and media tags</li>

	<li><i>Category</i>: Tag category, without changes</li>

	<li><i>Author</i>: Tag author, tell me if you get error in Atom files</li>

	<li><i>Date</i>: Item date in timestamp or set date format in time_format
	option</li>
</ul>


				</div>
			</div></td>
		</tr>
		<tr data-order="options" id="$options">
			<td class="attributes"><code>
				private static 
				array
			</code></td>

			<td class="name">
					<a href="source-class-MagicFeed.html#87-102" title="Go to source code"><var>$options</var></a>
			</td>
			<td class="description"><div>
				<a href="#$options" class="anchor">#</a>

				<div class="description short">
					
<p>Default parse options. Available via set/get functions.</p>

				</div>

				<div class="description detailed hidden">
					
<p>Default parse options. Available via set/get functions.</p>


						<h4>See</h4>
						<div class="list">
								<code><a href="class-MagicFeed.html#_set">MagicFeed::set()</a></code> and <code><a href="class-MagicFeed.html#_get">MagicFeed::get()</a></code><br />
						</div>
				</div>
			</div></td>
		</tr>
		</table>






</div>
	</div>

	<div id="footer">
		PHP MagicFeed API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</body>
</html>
